knitr::opts_chunk$set(echo = FALSE, results = "hide", warning = FALSE, message = FALSE, fig.width=8, fig.height=4)
options(scipen = 0, digits = 3)
if(!require('pacman')) {install.packages('pacman')}
pacman::p_load(bestglm, glmnet, leaps, car, tidyverse, pROC, caret, haven, lfactors, readxl, collapse, mice, skimr, naniar, ggpubr, RColorBrewer, usmap, table1, treemap, d3treeR)
diabetes <- read.csv("finaldataset.csv")
View(diabetes)
diabetes <- diabetes %>% mutate(as.factor(1)) %>% mutate(across(3:4, as.factor)) %>% mutate(across(7:26, as.factor)) %>% mutate(across(28:41, as.factor)) %>% mutate(as.factor(50))
diabetes$DIABETESYN <- as.factor(diabetes$DIABETESYN)
diabetes$FLUSHOT <- as.factor((diabetes$FLUSHOT))
diabetes <- read.csv("finaldataset.csv")
diabetes <- diabetes %>% mutate(across(3:4, as.factor)) %>% mutate(across(7:26, as.factor)) %>% mutate(across(28:41, as.factor)) %>% mutate(across(50:57))
diabetes$DIABETESYN <- as.factor(diabetes$DIABETESYN)
diabetes <- read.csv("finaldataset.csv")
diabetes <- diabetes %>% mutate(across(3:4, as.factor)) %>% mutate(across(7:26, as.factor)) %>% mutate(across(28:41, as.factor)) %>% mutate(across(50:57, as.factor))
diabetes$DIABETESYN <- as.factor(diabetes$DIABETESYN)
knitr::opts_chunk$set(echo = FALSE, results = "hide", warning = FALSE, message = FALSE, fig.width=8, fig.height=4)
options(scipen = 0, digits = 3)
if(!require('pacman')) {install.packages('pacman')}
pacman::p_load(bestglm, glmnet, leaps, car, tidyverse, pROC, caret, haven, lfactors, readxl, collapse, mice, skimr, naniar, ggpubr, RColorBrewer, usmap, table1, treemap, d3treeR, dplyr, ggbiplot, purrr)
data <- read.csv("data/cleaneddata_4.11.23.csv")
data <- read.csv("data/cleaneddata_4.11.23.csv")
diabetes <- read.csv("finaldataset.csv")
diabetes <- diabetes %>% mutate(across(3:4, as.factor)) %>% mutate(across(7:26, as.factor)) %>% mutate(across(28:41, as.factor)) %>% mutate(across(50:57, as.factor))
diabetes$DIABETESYN <- as.factor(diabetes$DIABETESYN)
# diabetes <- readRDS("diabetes.rds")
dim(diabetes)
#Treemap of education, employment, and home ownership
edudata <- diabetes %>%
mutate(EMPLOY2 = ifelse(EMPLOY=="Unable to work" | EMPLOY=="Unemployed 1 year or more" | EMPLOY=="Unemployed less than 1 year", "Unemployed", EMPLOY), HOME2 = ifelse(HOME=="Other" | HOME=="Not sure", "Other", HOME), EDU2 = ifelse(EDU=="Elementary" | EDU=="None" | EDU=="Some high school", "Less than high school", EDU)) %>%
group_by(EDU2, EMPLOY2, HOME2) %>%
dplyr::summarise(total=n(),.groups = 'drop') %>%
ungroup()
figure5 <- treemap(edudata, index=c("EDU2", "EMPLOY2", "HOME2"), vSize = "total", type = "index", palette="YlGnBu")
figure5_inter <- d3tree2(figure5,  rootname = "Education Level" )
